<!DOCTYPE html>
{% extends 'blog/base.html' %}
{% block body_block %}
    <h1>{{ article.title }}</h1>
    <div>{{ article.content|safe }}</div>

    <h2>Graph</h2>
    {% if article.excel_file %}
        <form method="get" action="">
            <label for="column">Select Column:</label>
            <select name="column" id="column" onchange="this.form.submit()">
                <option value="">Select a column</option>
                {% for column in columns %}
                    <option value="{{ column }}" {% if column == selected_column %}selected{% endif %}>{{ column }}</option>
                {% endfor %}
            </select>
        </form>

        {% if selected_column %}
            <img src="{% url 'blog:plot_graph' article.id %}?column={{ selected_column }}" alt="Graph">
        {% endif %}
    {% else %}
        <p>No Excel file associated with this article.</p>
    {% endif %}
{% endblock %}